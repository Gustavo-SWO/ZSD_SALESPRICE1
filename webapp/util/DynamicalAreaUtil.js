sap.ui.define(["sap/ui/base/Object","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(i,e,t){return i.extend("zzcus.sd.salesprices.manage..util.DynamicalAreaUtil",{aDefaultFilters:["EditingStatus","FilterMethod","ConditionType","ConditionTable","ConditionRecord","ValidOnDate"],aDefaultColumns:["ConditionType","ConditionTable","ConditionValidityStartDate","ConditionValidityEndDate","ConditionRateValue","ConditionQuantity","ConditionLowerLimit","ConditionUpperLimit","ConditionText","PaymentTerms","FixedValueDate","AdditionalValueDays","ConditionToBaseQtyNmrtr","ConditionToBaseQtyDnmntr","BaseUnit","ConditionCalculationType","ConditionRecord","SalesPriceApprovalRequest","ConditionProcessingStatus","ConditionReleaseStatus","Status"],aOptionalFilter:["ConditionValidityStartDate","ConditionValidityEndDate"],aOtherSelectedFilter:[],aKeyFields:[],iKeyFieldsNumber:0,aFilters:[],aColumns:[],aKeyFieldsFilters:[],oDataModel:void 0,sEntitySet:void 0,aKeyFieldsResult:[],aFilterFields:[],aKeyFieldsResultOld:[],constructor:function(i,e,t){this.oSmartFilterBar=i,this.oNoteListManager=e,this.oBusyModel=t,this.aFilters=i.getAllFilterItems(),this.aColumns=e.getTable().getColumns()},getKeyField:function(){return this.aFilterFields},setDataSource:function(i,e){this.oDataModel=i,this.sEntitySet=e},setFilterValues:function(i){for(var s in this.aKeyFieldsFilters=[],i)if(i[s]){var a=[];if(i[s].values instanceof Array)for(var l=0;l<i[s].values.length;l++)a.push(new e(i[s].name,t.EQ,i[s].values[l].key));else a.push(new e(i[s].name,t.EQ,i[s].values));this.aKeyFieldsFilters.push(new e({filters:a,and:!1}))}},changeDynamicalArea:function(i,e,t){0!==this.aKeyFieldsFilters.length?this.oDataModel.read(this.sEntitySet,{filters:this.aKeyFieldsFilters,success:(function(s){for(var a in this.aKeyFieldsResult=s.results,this.aKeyFields=[],this.aOtherSelectedFilter=[],s.results)s.results[a]&&-1===this.aKeyFields.indexOf(s.results[a].ConditionFieldName)&&this.aKeyFields.push(s.results[a].ConditionFieldName);if(t){this.aKeyFieldsResultOld=this.aKeyFieldsResult.concat(),this.aFilterFields=this.aKeyFields.concat(),this.iKeyFieldsNumber=this.aKeyFields.length,this.oBusyModel.getProperty("/isBusy")&&this.oBusyModel.setProperty("/isBusy",!1);return}this._resetFilterBar(e,i),void 0!==i&&this.oSmartFilterBar.search(),e&&this.oNoteListManager.rebindTable(!0),this.oBusyModel.getProperty("/isBusy")&&this.oBusyModel.setProperty("/isBusy",!1)}).bind(this)}):this._initFilterBar(t,i)},_resetFilterBar:function(i,e){if(void 0===i){this._resetFilterData(e),this.aKeyFieldsResultOld=this.aKeyFieldsResult.concat(),this.aFilterFields=this.aKeyFields.concat();var t=["ConditionType","Customer","ConditionRecord","SalesOrganization","Plant","ZZKUNZR","ZZ1_KUNZR_PCHF"];for(var s in this.aFilters)if(-1!==this.aDefaultFilters.indexOf(this.aFilters[s].getName())||-1!==this.aKeyFields.indexOf(this.aFilters[s].getName())||-1!==this.aOtherSelectedFilter.indexOf(this.aFilters[s].getName())){if(-1===t.indexOf(this.aFilters[s].getName())){this.aFilters[s].setVisibleInAdvancedArea(!0);continue}}else this.aFilters[s].setVisibleInAdvancedArea(!1)}else{for(s in this.aFilterFields)-1===this.aKeyFields.indexOf(this.aFilterFields[s])&&this.aKeyFields.push(this.aFilterFields[s]);this.aKeyFieldsResult=this.aKeyFieldsResultOld.concat()}this.iKeyFieldsNumber=this.aKeyFields.length},_resetFilterData:function(i){var e=Object.assign({},this.oSmartFilterBar.getFilterData());if(void 0!==e){var t={};for(var s in void 0!==e.ConditionRecord&&(t.ConditionRecord=e.ConditionRecord),void 0!==e.ValidOnDate&&(t.ValidOnDate=e.ValidOnDate),void 0!==e.ConditionType&&(t.ConditionType=e.ConditionType),void 0!==e.ConditionTable&&(t.ConditionTable=e.ConditionTable),this.aKeyFields)void 0!==e[this.aKeyFields[s]]&&(t[this.aKeyFields[s]]=e[this.aKeyFields[s]]);for(s in this.aOptionalFilter)void 0!==e[this.aOptionalFilter[s]]&&(t[this.aOptionalFilter[s]]=e[this.aOptionalFilter[s]],this.aOtherSelectedFilter.push(this.aOptionalFilter[s]));void 0===i&&(this.oSmartFilterBar._resetFilterFields(),this.oSmartFilterBar.setFilterData(t))}},_hideColumn:function(){for(var i=[],e="",t=!1,s=0;s<this.aColumns.length;s++){for(var a in e=(i=this.aColumns[s].getId().split("-"))[i.length-1],this.aDefaultColumns){if(e===this.aDefaultColumns[a]){this.aColumns[s].setVisible(!0),t=!0;break}t=!1}if(!t)for(var l in this.aColumns[s].setVisible(!1),this.aKeyFields)e===this.aKeyFields[l]&&(this.aColumns[s].setVisible(!0),t=!0)}},_initFilterBar:function(i,e){if(this.aFilterFields=[],this.aKeyFieldsResult=[],this.iKeyFieldsNumber=0,i){this.oBusyModel.getProperty("/isBusy")&&this.oBusyModel.setProperty("/isBusy",!1);return}for(var t in this.aFilters){if(this.aFilters[t]&&-1!==this.aDefaultFilters.indexOf(this.aFilters[t].getName())){this.aFilters[t].setVisibleInAdvancedArea(!0);continue}this.aFilters[t].setVisibleInAdvancedArea(!1)}for(var s in this.aColumns)this.aColumns[s]&&this.aColumns[s].setVisible(!0);if(void 0!==e){this.oBusyModel.getProperty("/isBusy")&&this.oBusyModel.setProperty("/isBusy",!1),this.oSmartFilterBar.search();return}var a=Object.assign({},this.oSmartFilterBar.getFilterData());if(void 0!==a){var l={};void 0!==a.ConditionRecord&&(l.ConditionRecord=a.ConditionRecord),void 0!==a.ValidOnDate&&(l.ValidOnDate=a.ValidOnDate),this.oSmartFilterBar._resetFilterFields(),this.oSmartFilterBar.setFilterData(l)}this.oBusyModel.getProperty("/isBusy")&&this.oBusyModel.setProperty("/isBusy",!1)}})});